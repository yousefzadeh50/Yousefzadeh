  function startGame(subjectKey) {
    const dict = subjects[subjectKey];
    words = Object.keys(dict);
    total = words.length;
    score = 0;
    index = 0;
    attempts = 0;
    scoreEl.textContent = 'Score: 0';
    remainingEl.textContent = `Remaining: ${total} words`;
    progressFill.style.width = '0%';
    answersList.innerHTML = '';
    showCurrentWord();
  }

  function showCurrentWord() {
    const en = words[index];
    lettersEl.textContent = shuffleWord(en);
    inputEl.value = '';
    inputEl.focus();
    attempts = 0;
    feedbackEl.textContent = '';
    resetTimer();
  }

  function resetTimer() {
    clearInterval(timer);
    timeLeft = 30;
    timerEl.textContent = `â± ${timeLeft}`;
    timer = setInterval(() => {
      timeLeft--;
      timerEl.textContent = `â± ${timeLeft}`;
      if (timeLeft <= 0) {
        clearInterval(timer);
        feedbackEl.textContent = `â± Ø²Ù…Ø§Ù† ØªÙ…Ø§Ù… Ø´Ø¯! Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª: ${words[index]} (${subjects[currentSubjectKey][words[index]]})`;
        score = Math.max(0, score - 5);
        soundWrong.play();
        goNextWord();
      }
    }, 1000);
  }

  function checkAnswer() {
    const userAns = inputEl.value.trim().toLowerCase();
    const correctAns = words[index].toLowerCase();
    if (userAns === correctAns) {
      score += 10;
      feedbackEl.textContent = "âœ… Ø¹Ø§Ù„ÛŒ! Ø¯Ø±Ø³Øª Ú¯ÙØªÛŒ.";
      soundCorrect.play();
      answersList.innerHTML += `<div>âœ” ${correctAns} â€” ${subjects[currentSubjectKey][correctAns]}</div>`;
      goNextWord();
    } else {
      attempts++;
      feedbackEl.textContent = "âŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³ØªØŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†.";
      soundWrong.play();
      if (attempts >= 3) {
        feedbackEl.textContent = `Ù¾Ø§Ø³Ø® Ø¯Ø±Ø³Øª: ${correctAns} (${subjects[currentSubjectKey][correctAns]})`;
        score = Math.max(0, score - 5);
        goNextWord();
      }
    }
    scoreEl.textContent = `Score: ${score}`;
  }

  function goNextWord() {
    clearInterval(timer);
    index++;
    progressFill.style.width = `${(index/total)*100}%`;
    remainingEl.textContent = `Remaining: ${total - index} words`;
    if (index < total) {
      setTimeout(showCurrentWord, 1000);
    } else {
      finishGame();
    }
  }

  function finishGame() {
    feedbackEl.textContent = "ğŸ‰ Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯! Ø¢ÙØ±ÛŒÙ† ğŸ‘";
    soundFinish.play();
    gameArea.style.display = "none";
    startScreen.style.display = "block";
  }

  submitBtn.addEventListener("click", checkAnswer);
  restartBtn.addEventListener("click", () => {
    gameArea.style.display = "none";
    startScreen.style.display = "block";
    music.pause();
    musicBtn.textContent = "ğŸµ Play Music";
  });
});
</script>
</body>
</html>
